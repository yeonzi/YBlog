<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN"
"http://www.wapforum.org/DTD/xhtml-mobile10.dtd">
<html>
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="My Personal Site">
<meta name="author" content="liyeonji@gmail.com">

<title><%= $blog_title %></title>

<link rel="stylesheet" type="text/css" href="./static/css/blog_default.css">
<link rel="stylesheet" type="text/css" href="./static/css/markdown.css">
<link rel="stylesheet" type="text/css" href="./static/css/loaders.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/font-awesome/4.4.0/css/font-awesome.min.css">
<link href="https://cdn.bootcss.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="https://fonts.proxy.ustclug.org/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

<link type="text/css" rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.css">
<script id="-cdnjs-cloudflare-com-ajax-libs-KaTeX-0-3-0-katex-min" type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.js"></script>

<style type="text/css">
	body {
		width: 100%;
		height: 100%;
		margin: 0px;
		padding: 0px;
	}

	.blog-body {
		width: 100%;
		margin: auto;
		padding: 50px 40px;
	}

	.sidebar {
		background: url(./image/bg.jpg) no-repeat center center;
		-webkit-background-size: cover;
		-moz-background-size: cover;
		background-size: cover;
		-o-background-size: cover;
	}

	.article-page {
		width: 100%;
	}
</style>

<script type="text/javascript">
	window.addEventListener("load", function() {
		  var wrapper = document.getElementById("loader");
		  document.body.removeChild(loader);
	});
</script>

</head>

<body>
	<div id="loader" style="position:fixed;width:100%;height:100%;z-index:20;padding-top:30vh;background-color:#ADF">
		<center>
				<div data-loader="circle-side"></div>
		</center>
	</div>

	<div class="wrapper">
		<aside class="sidebar">
			<header>
				<div class="about">
					<div class="cover-author-image">
						<img src="./image/avatar.jpg" alt="<%= $blogger_name %>">
					</div>
					<div class="author-name" onclick="click_handle()"><%= $blogger_name %></div>
					<p><%= $blogger_intro %></p>
				</div>
			</header>
			<footer>
				<section class="contact">
					<h3 class="contact-title">Contact me</h3>
					<ul>
						<% if $link_email != nil %>
							<li class="email"><a href="mailto:<%= $link_email %>" target="_blank"><i class="fa fa-envelope-o"></i></a></li>
						<% end %>
						<% if $link_facebook != nil %>
							<li class="facebook"><a href="<%= $link_facebook %>" target="_blank"><i class="fa fa-facebook"></i></a></li>
						<% end %>
						<% if $link_github != nil %>
							<li class="github"><a href="<%= $link_github %>" target="_blank"><i class="fa fa-github"></i></a></li>
						<% end %>
						<% if $link_qq != nil %>
							<li class="qq"><a href="<%= $link_qq %>" target="_blank"><i class="fa fa-qq"></i></a></li>
						<% end %>
						<% if $link_twitter != nil %>
							<li class="twitter"><a href="<%= $link_twitter %>" target="_blank"><i class="fa fa-twitter"></i></a></li>
						<% end %>
						<li class="rss"><a href="./rss"><i class="fa fa-rss"></i></a></li>
					</ul>
				</section> <!-- End Section Contact -->
				<div class="copyright">
					<p><%= $copy_right %></p>
				</div>
			</footer>
		</aside>

		<div class="content-box clearfix">
			
			<% if blog_list.length == 0 %>

			暂时没有文章呢

			<% else %>

				<% blog_list.each do |item| %>

					<article class="post">
						<% if item[:image] != nil %>
							<a class="post-thumbnail" style="background-image: url(<%= item[:image] %>)" href="<%= item[:path] %>"></a>
						<% end %>

					<div class="post-content">
						<h2 class="post-title"><a href="<%= item[:path] %>"> <%= item[:title].to_s %> </a></h2>
						<p> <%= item[:abstract] %> </p>
						<span class="post-date"> <%= item[:time].to_s %> </span>
					</div>
					</article>
				
				<% end %>

			<% end %>

			<div class="container">
				<nav class="pagination" role="pagination">
					<ul>
						<p><span class="page-number"><%= server_info %></span></p>
					</ul>
				</nav>
			</div>
		</div>
	</div>
	<script src="./static/js/jquery.min.js"></script>
	<script src="./static/js/editormd.js"></script>
	<script type="text/javascript">
			$("body").find(".editormd-tex").each(function(){
				var tex  = $(this);
				katex.render(tex.text(), tex[0]);
				
				tex.find(".katex").css("font-size", "1.6em");
			});

			var cnt=0;

			function click_handle() {
				cnt+=1;
				if (cnt>=<%= login_cnt %>) {
					cnt=0;
					window.location.href="<%= login_href %>";
				}
			}
	</script>
</body>
</html>
